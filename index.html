<html>
<head>
<style>
a {
  color: blue;
  text-decoration: none; /* no underline */
}
</style>
</head>
<body onLoad="rrr();">
<script>
	var current = 0;
	var today = new Date().toJSON().slice(0,10);
	const MAX = 14;

	function setToday() {
		today = new Date().toJSON().slice(0,10);
		
		// refresh
		current=0;
		updateForecast();
	}
	function setYesterday() {
		var dt = new Date();
		dt.setDate(dt.getDate() - 1);
		today = dt.toJSON().slice(0,10);
		
		// refresh
		current=0;
		updateForecast();
	}	
	function next() {
		current +=1;
		if (current>MAX)
			current = MAX;
		updateForecast()
	}
	function prev() {
		current -=1;
		if (current<0)
			current = 0;
		updateForecast()
	}
	function updateForecast() {
		document.getElementById("forecast").src="http://www.isac.cnr.it/dinamica/projects/forecasts/moloch/output/"+today+"/prtt_"+parse3(current)+".png";
	}
	function parse3(x) {
		if (x<10)
			return "00"+x;
		if (x<100)
			return "0"+x;
	}
	/*function rrr() {
		var w = window.innerWidth;
		var h = window.innerHeight;
		// document.getElementById("screen").width=w;
		// document.getElementById("screen").height=h;
		if (h>w) {
			// vertical
			console.log("vertical");
			document.getElementById("screen").style.width="100%";
		} else {
			//horizontal
			console.log("horizontal");
			document.getElementById("screen").style.height="100%";
		}
	}*/
</script>
<table id="screen" style="max-height: 100%; max-width: 100%">
	<tr>
		<td align="center"><a href="javascript:setToday();">TODAY'S FORECAST</a></td>
		<td align="center"><a href="javascript:setYesterday();">YESTERDAY'S FORECAST</a></td>
	</tr>
	<tr>
		<td colspan="2">
			<img alt="NO IMAGE" id="forecast"
			     src="http://www.newdesignfile.com/postpic/2016/05/thunderstorm-weather-icon_399285.png"
			     style="max-height: 100%; max-width: 100%"/>
		</td>
	</tr>
	<tr>
		<td align="center"><a href="javascript:prev();">&lt; PREV</a></td>
		<td align="center"><a href="javascript:next();">NEXT &gt;</a></td>
	</tr>
</table>
</body></html>
